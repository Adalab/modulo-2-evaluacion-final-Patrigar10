const v=document.querySelector(".js-search-input"),p=document.querySelector(".js-search-btn"),u=document.querySelector(".js-search-list");let m=[],n=JSON.parse(localStorage.getItem("favouritesKey"))||[];const d=document.querySelector(".js-favourites-list");let r="";const h=i=>{const s=parseInt(i.currentTarget.id),e=n.findIndex(t=>t.mal_id===s);console.log(e),console.log(n),n.splice(e,1),localStorage.setItem("favouritesKey",JSON.stringify(n)),r(n)},f=i=>{for(const s of i){const e=document.createElement("li");e.setAttribute("class","results_movie js-movie"),e.setAttribute("id",s.mal_id),u.appendChild(e);const t=document.createElement("img");t.setAttribute("class","results_movie_img"),s.url==="https://myanimelist.net/anime/38876/UFO"?t.setAttribute("src","https://developers.elementor.com/docs/assets/img/elementor-placeholder-image.png"):t.setAttribute("src",s.images.jpg.image_url),t.setAttribute("alt",s.titles[0].title),e.appendChild(t);const l=document.createElement("h3");l.setAttribute("class","results_movie_title"),e.appendChild(l);const o=document.createTextNode(s.titles[0].title);l.appendChild(o);const a=document.querySelectorAll(".js-movie");for(const c of a)c.addEventListener("click",b)}};r=i=>{d.innerHTML="";for(const e of i){const t=document.createElement("li");t.setAttribute("class","favs_movie js-fav results-title"),t.setAttribute("id",e.mal_id),d.appendChild(t);const l=document.createElement("img");l.setAttribute("class","favs_movie_img"),e.url==="https://myanimelist.net/anime/38876/UFO"?l.setAttribute("src","https://developers.elementor.com/docs/assets/img/elementor-placeholder-image.png"):l.setAttribute("src",e.images.jpg.image_url),l.setAttribute("alt",e.titles[0].title),t.appendChild(l);const o=document.createElement("h3");o.setAttribute("class","favs_movie_title"),t.appendChild(o);const a=document.createTextNode(e.titles[0].title);o.appendChild(a);const c=document.createElement("i");c.setAttribute("class","fa-solid fa-circle-xmark favs_movie_icon"),c.setAttribute("style","color: #eca3a3"),t.appendChild(c)}const s=document.querySelectorAll(".js-fav");for(const e of s)e.addEventListener("click",h)};n!==[]&&r(n);const g=i=>{i.preventDefault(),u.innerHTML="";const s=v.value;fetch(`https://api.jikan.moe/v4/anime?q=${s}`).then(e=>e.json()).then(e=>{m=e.data,f(e.data)})};p.addEventListener("click",g);const b=i=>{const s=parseInt(i.currentTarget.id);for(const t of m)s===t.mal_id&&i.currentTarget.classList.add("selected-bg");const e=m.find(t=>s===t.mal_id);n.push(e),localStorage.setItem("favouritesKey",JSON.stringify(n)),r(n)};
//# sourceMappingURL=main.js.map
